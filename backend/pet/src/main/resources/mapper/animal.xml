<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.sns.pet.dao.AnimalDao">
<!--    <insert id="insertAnimal" parameterType="animalLikeDto">-->
<!--        INSERT INTO animallike(userNumber, animalNumber)-->
<!--        VALUES-->
<!--        <foreach collection="animalLikeDto" item="animalLikeDto" separator=" , ">-->
<!--        (#{userNumber}, #{animalNumber})-->
<!--        </foreach>-->
<!--    </insert>-->

     <insert id="insertAnimal" parameterType="java.util.Map">
        INSERT INTO animallike(userNumber, animalNumber)
        VALUES
        <foreach collection="getFavAnimal" item="item" separator=" , ">
        (#{item.userNumber}, #{item.animalNumber})
        </foreach>
    </insert>

    <delete id="deleteAnimal" parameterType="map">
        DELETE FROM animallike
        WHERE userNumber=#{userNumber}
    </delete>
    
    <select id="selectFavAnimal" parameterType="Long" resultMap="getFavAnimal">
        SELECT userNumber, animalNumber
        FROM animallike
        where userNumber=#{userNumber}
    </select>

    <select id="selectAnimal" resultMap="getAnimal">
        SELECT *
        FROM animal
    </select>

    <resultMap id="getAnimal" type="AnimalDto">
        <result column="animalNumber" property="animalNumber"/>
        <result column="animalName" property="animalName"/>
    </resultMap>

    <resultMap id="getFavAnimal" type="AnimalLikeDto">
        <result column="userNumber" property="userNumber"/>
        <result column="animalNumber" property="animalNumber"/>
    </resultMap>
</mapper>